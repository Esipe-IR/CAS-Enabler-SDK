<html>
    <head>
        <title>Simple SDK Demo</title>

        <style>
            .cas {
                background: #EB5B0C;
                padding: 10px 15px;
                color: white;
                border: none;
                border-radius: 2px;
                cursor: pointer;
            }
        </style>
    </head>
    <body>
        <button id="cas-btn" class="cas">Connect with UPEM</button>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jschannel/1.0.0-git-commit1-8c4f7eb/jschannel.min.js"></script>
        <script src="../sdk.js"></script>
        <script>
            function callback(jwt) {
                var xhr = new XMLHttpRequest();
                xhr.open('GET', 'simple-demo.php?jwt=' + jwt);
                xhr.onreadystatechange = function() {
                    if (xhr.readyState == 4 && xhr.status == 200) {
                        console.log("usr = ", xhr.responseText);
                    }
                }
                xhr.send(null);
            }

            var config = {
                callbackName: "callback", //The function name of callback
                callbackFn: callback, //Your callback
                publicUid: null //Your service public uid
            };

            var sdk = new CASEnablerSDK(config);

            var btn = document.getElementById("cas-btn");
            btn.addEventListener('click', function() {
                sdk.connect();                
            }, false);
        </script>
    </body>
</html>
