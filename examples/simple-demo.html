<html>
    <head>
        <title>Simple SDK Demo</title>
    </head>
    <body>
        <button onclick="success();">Example success</button>
        <button onclick="nonexistent();">Example nonexistent service</button>

        <button onclick="sdk.auth();">Auth</button>
        <button onclick="sdk.token();">Token</button>
        
        <script src="../sdk.js"></script>
        <script>
            function handleError(response) {
                alert(response.error);

                switch (response.code) {
                    case 1:
                        //Handle not connected
                        break;
                    case 2:
                        //Handle nonexistent service
                        break;
                    case 3:
                        //Handle unallowed service
                        break;
                    case 4:
                        //Handle fatal error token
                        break;
                    default:
                        break;
                }
            }

            function callback(response) {
                console.log(response);

                if (!response.status) {
                    return handleError(response);
                }

                alert("Receive the token");
            }

            function success() {
                alert("Start a working example");

                var validConfig = {
                    uid: "acf2feb0-05a4-11e7-93ae-92361f002671"
                };

                sdk.setConfig(validConfig);
                sdk.token();
            }

            function nonexistent() {
                alert("Start nonexistent service example");

                var invalidConfig = {
                    uid: "unknown"
                };

                sdk.setConfig(invalidConfig);
                sdk.token();
            }

            var config = {
                baseUrl: "https://perso-etudiant.u-pem.fr/~vrasquie/cas",
                callbackName: "callback",
                callbackFn: callback,
                isJsonp: true,
                debug: true
            };

            var sdk = new CASEnablerSDK(config);
        </script>
    </body>
</html>
